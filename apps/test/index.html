<h1>Upload file test</h1>
<form action="/upload" method="post" encType="multipart/form-data"><input type="text" placeholder="path" name="path"><input type="file" name="e[]" multiple /><input type="submit" /></form>
<h1>Fsable window test</h1>
<input type="checkbox" onchange="s.postMessage({do: 'fsable', val: event.target.checked})" checked>
<h1>Close window test</h1>
<button onclick="s.postMessage({do: 'close'})">Close</button>
<h1>Window title test</h1>
<input type="text" value="test" oninput="s.postMessage({do: 'title', val: event.target.value})">
<h1>Create dir</h1>
<form action="/dir" method="post"><input type="text" name="p"><input type="submit"></form>
<h1>Del</h1>
<input type="text" id="s"><button onclick="fetch('/files/'+document.querySelector('#s').value, {method: 'delete'})">
<button onclick="s.postMessage({
  do: 'open',
  val: {
    title: 'test',
    file: 'test.html'
  }
})">new window</button>
<button onclick="fetch('/app_config').then(v => v.text()).then(v => alert(v))">config</button>
<input id="sk" placeholder="set key">
<input id="sv" placeholder="set value">
<button onclick="x()">a</button>
<input onchange="fetch('/app_config/'+encodeURIComponent(this.value), {method: 'delete'})" placeholder="del">
<script>
var s;
window.onmessage = e => s = e.ports[0];
function x() {
  fetch('/app_config/'+encodeURIComponent(document.getElementById('sk').value)+'?val='+encodeURIComponent(document.getElementById('sv').value), {
    method: 'post'
  })
}
</script>
